unit uCadCliente;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants,
  System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Data.DB, Vcl.Grids, Vcl.DBGrids,
  uDataModule, Vcl.StdCtrls, Vcl.Mask, FireDAC.Comp.Client;

type
  TfrmCliente = class(TForm)
    dbgMostraDadosCliente: TDBGrid;
    dsCliente: TDataSource;
    btnInserir: TButton;
    btnAlterar: TButton;
    btnConsulta: TButton;
    btnExcluir: TButton;
    Label1: TLabel;
    Edit1: TEdit;
    Label2: TLabel;
    Edit2: TEdit;
    Label3: TLabel;
    MaskEdit1: TMaskEdit;
    Label4: TLabel;
    Edit3: TEdit;
    procedure btnConsultaClick(Sender: TObject);
    procedure Edit3Change(Sender: TObject);
    procedure MaskEdit1Exit(Sender: TObject);

  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  frmCliente: TfrmCliente;

implementation

uses
  uNumero;

{$R *.dfm}



procedure TfrmCliente.btnConsultaClick(Sender: TObject);
begin

  // dm_dados.qryCliente := not dm_dados.qryCliente.Active;

end;

procedure TfrmCliente.Edit3Change(Sender: TObject);
begin

  with dm_dados.qryCliente do
  begin
    open;
    EmptyDataSet;
    close;
    open;
  end;

  dm_dados.qryCliente.close;
  dm_dados.qryCliente.Params.ClearValues();
  dm_dados.qryCliente.Params[0].AsString := '%' + Edit3.Text + '%';
  dm_dados.qryCliente.open();

end;

procedure TfrmCliente.MaskEdit1Exit(Sender: TObject);
begin
  if Length(numeros(MaskEdit1.Text)) = 11 then
  begin
    MaskEdit1.EditMask := '(99) 9 9999-9999;0_';
  end
  else if Length(numeros(MaskEdit1.Text)) = 10 then
  begin
    MaskEdit1.EditMask := '(99) 9999-9999;0_';
  end
  else if Length(numeros(MaskEdit1.Text)) <> 0 then
  begin
    ShowMessage('NÚMERO INVÁLIDO');
    Abort;
  end;

end;

end.
